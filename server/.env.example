# ── 基本設定 ──────────────────────────────────
PORT=3939

# ── Web Push (VAPID) — PWA を使う場合は必須 ──────────────
# `npx web-push generate-vapid-keys` で生成
# VAPID_PUBLIC_KEY=BxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxQ=
# VAPID_PRIVATE_KEY=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxQ
# VAPID_SUBJECT=mailto:you@example.com

# ── APNs — iOS アプリを使う場合は必須 ────────────────────
# APNS_KEY_PATH=./certs/AuthKey_XXXXXXXXXX.p8
# APNS_KEY_ID=XXXXXXXXXX
# APNS_TEAM_ID=XXXXXXXXXX
# APNS_BUNDLE_ID=com.example.prompt-relay
# APNS_PRODUCTION=false

# ── 以下はすべてオプション ──────────────────────────────

# ── ルームキー（API キー）──────────────────────────────
# サーバ側に固定キーの設定は不要です。
# クライアント（フック・PWA・アプリ）が送信する Bearer トークンがそのままルームキーとなり、
# 同じキーを持つクライアント同士が同じルーム（データ空間）を共有します。
# 異なるキーを使えば、1つのサーバインスタンスで複数ユーザを分離できます。
#
# ⚠ セキュリティ注意:
# - サーバはキーの正当性を検証しません。任意のキーでルームを作成できるため、
#   インターネットに直接公開しないでください。
# - Tailscale や VPN 等の信頼できるネットワーク内での利用を推奨します。
# - ルームキーは他のサービスのパスワードと使い回さないでください。

# リクエストタイムアウト（秒、デフォルト 120）
# 未応答のリクエストがこの時間で期限切れになる。フック側の PROMPT_RELAY_TIMEOUT と合わせる
# REQUEST_TIMEOUT=120

# リクエスト自動削除（秒、デフォルト 300）
# 応答済み・期限切れのリクエストがこの時間で自動削除される
# REQUEST_CLEANUP=300

# 空ルーム自動削除（秒、デフォルト 3600）
# デバイス・リクエストが 0 件のルームがこの時間で自動削除される
# ROOM_CLEANUP=3600

# 履歴保持件数（デフォルト 0 = 無制限）
# ルームあたりの最大リクエスト保持数。超過分は古い順に削除される
# MAX_HISTORY=0

# マルチデバイス上限（APNs / Web Push 各上限、デフォルト 4）
# MAX_DEVICES=4

# マルチテナント: ルーム上限（デフォルト 10）
# MAX_ROOMS=10

# HTTPS（未設定で自己署名証明書を自動生成）
# HTTPS_PORT=3940
# HTTPS_CERT_PATH=/path/to/cert.pem
# HTTPS_KEY_PATH=/path/to/key.pem

# 証明書に追加する SAN（カンマ区切り、Docker外やTailscaleのドメイン/IP用）
# HTTPS_EXTRA_SANS=myserver.example.com,192.168.1.100
